\# ---------- 1. Сборка ----------

FROM maven:3.9.9-eclipse-temurin-17 AS build  ----  Берём официальный Docker-образ с Maven и JDK 17, AS "имя"



WORKDIR /app  ----  Задаём рабочую директорию в контейнере



\# Копируем pom.xml и исходники

COPY pom.xml .   ---  копируем pom.xml в /app внутри контейнера

COPY src ./src   ---  копируем папку с исходным кодом



\# Сборка fat-jar

RUN mvn clean package -DskipTests  ---  собирает проект Maven зависимости и внутри контейнера появится готовый JAR,-DskipTests — пропускаем тесты, чтобы сборка была быстрее



\# ---------- 2. Финальный образ ----------

FROM eclipse-temurin:17-jre-alpine  ---  Новый образ на основе JRE, а не JDK.В нём мы будем только запускать приложение, а не собирать



WORKDIR /app



\# Копируем JAR из предыдущего шага

COPY --from=build /app/target/\*.jar app.jar  ---  берём файлы из предыдущего этапа, копируем собранный JAR в текущую рабочую папку и называем его app.jar



\# Запуск приложения

CMD \["java", "-jar", "app.jar"]  ---  CMD — команда, которая выполняется при запуске контейнера (docker run), java -jar app.jar — стандартный запуск Spring Boot приложения

Docker Compose - 
Императивный подход - это способ работы с контейнерами и образами, пошагова через терминал задавая команды
Декларативный подход - когда не говорите, как именно что делать, а лишь описыыать желаемые результаты контейнера и образа, короче создание файла с инструкции

